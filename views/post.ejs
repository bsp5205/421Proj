<% if (username){%>
    <%- include('loggedinhead.ejs') %>
<% } else { %>
    <%- include('head.ejs') %>
<% } %>
<style>
    .item2 {
        grid-area: menu;
        height: 800px;
        background-size: cover;
        background-color: transparent;
    }
    .item3 {
        grid-area: main;
        height: auto;
        min-height: 100%;
        height: 115%;
    }
    .item4 {
        grid-area: right;
        height: 580px;
    }
    p{
        padding-left: 2%;
    }

    .grid-container {
        background-image: url("https://images.hdqwalls.com/wallpapers/vaporwave-zl.jpg") !important;
        display: grid;
        gap: 10px;
        grid-template-columns: repeat(6,minmax(0,1fr));
        grid-template-rows: 15% 70% 15%;
        grid-template-areas:
            'menu main main main main right'
            'menu main main main main right';
        background-color: white;
        padding: 10px;
    }

    .grid-container > div {
        background-color: rgb(242, 242, 242);
        text-align: left;
        font-size: 30px;
        border-color: #FF10F0;
        border-style: solid;
    }

    .post {
        border-color: #000;
        border-style: solid;
        margin: 2%;

    }
    .comment{
        border-color: #000;
        border-style: solid;
        margin: 2%;
    }
    .block {
        display: block;
        width: 96%;
        background-color: darkgrey;
        font-size: 16px;
        cursor: pointer;
        text-align: center;
        padding: 100%;
        margin: 2%;
    }
    .blockTrending {
        display: block;
        height: 125px;
        width: 125px;
        background-color: darkgrey;
        font-size: 16px;
        cursor: pointer;
        text-align: center;
        margin: auto;
    }
    .blockRight {
        display: block;
        width: 96%;
        background-color: darkgrey;
        font-size: 16px;
        cursor: pointer;
        text-align: center;
        margin: 2%;
        padding: 30px;
    }
    .block:hover {
        background-color: #ddd;
        color: black;
    }
    .blockRight:hover {
        background-color: #ddd;
        color: black;
    }
    .blockTrending:hover{
        background-color: #ddd;
        color: black;
    }
    .centered {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .trending{
        display: block;
        margin: auto;
    }
    .trending > p{
        font-size: 20px;
        margin-bottom: 0;
    }
    .favorites{
        display: block;
        margin: auto;
    }
    .favorites > p{
        font-size: 20px;
        margin-bottom: 0;
        margin-top: 0;
    }
    .main{
        display: block;
        margin: auto;

        max-width: 100%;
        min-width: 100%;
        max-height: 100%;
        min-height: 100%;
    }
    .main > p{
        margin-bottom: -20px;
    }
    .adBlock{
        overflow:hidden;
        display: block;
        background-color: transparent;
        cursor: pointer;
        text-align: center;
        width: 75.5%;
        max-width: 100%;
        min-width: 100%;
        max-height: 100%;
        min-height: 100%;

    }
    .img-size{
        width: 100%;
        height: 100%;
        background: url("https://m.media-amazon.com/images/M/MV5BNmNhM2NjMTgtNmIyZC00ZmVjLTk4YWItZmZjNGY2NThiNDhkXkEyXkFqcGdeQXVyODU4MDU1NjU@._V1_.jpg");
        background-size:cover;
        background-position: center center;
    }

    .post-image{
        margin-left:3.5%;
        max-width: 100%;
    }

    .content{
        overflow:auto;
        font-size: 16px;
    }
    .textBoxSize{
        width: 95%;
        font-size: 16px;
        height: 10%;
    }
    .low{
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .comment{

    }
    .content{
        padding:1%;
        padding-top: 1%;
    }
    .postcontent{
        padding: 1%;
        font-size: 16px;
    }

</style>

<script>
    var num = 0;

    function like(param){
        console.log(param)
            var likes = parseInt(document.getElementById(param).innerHTML);
            likes += 1;
            document.getElementById(param).innerHTML = likes;
    }

    function postMessage(message , param){
        var UN = document.createElement("p");
        UN.append(test,": ");//username in UN

        var msg = document.createElement("p");
        msg.append("    ",message);//message from box
        msg.classList.add("text")

        var div = document.createElement("div");
        var outerDiv = document.createElement("div");
        var likeb = document.createElement('BUTTON');
        var liket = document.createTextNode("like");


        likeb.appendChild(liket);


        div.appendChild(UN);

        div.classList.add("msgCont")

        div.style.textDecoration = "underline";
        msg.style.textIndent = "1%";

        likeb.className+= "button button2";

        var a1 = document.createElement("a");
        a1.append("likes: ");
        var a2 = document.createElement("a");
        a2.innerHTML = "0";
        if(param == "cont") {
            a2.id = num;
            num += 1;
        }else{
            a2.id = "postid";
        }

        console.log(a2.id);
        outerDiv.append(div);
        outerDiv.append(msg);
        outerDiv.appendChild(likeb);
        outerDiv.append(a1);
        outerDiv.append(a2);

        likeb.addEventListener("click", function() { like(a2.id)});

        outerDiv.style.border = "solid black"

        if(a2.id != 0){
            outerDiv.style.borderTopStyle = "none";
        }

        outerDiv.classList.add("msgText");

        var cont = document.getElementById(param);

        if(param == "postCont"){
            document.getElementById('postmsg').remove();
            document.getElementById('postbutton').remove();
            outerDiv.style.border = "none";
        }

        cont.appendChild(outerDiv);

        event.preventDefault();
        document.getElementById("myForm").reset();
        tag.scrollIntoView();
        window.setTimeout( function () { top(); }, 2000 );
    }

</script>

<div class="grid-container">
    <div class="item2">
        <div class="img-size">
            <button class="adBlock" onclick="window.location.href = 'https://playvalorant.com/en-us/?gclid=CjwKCAjw6dmSBhBkEiwA_W-EoAgh1lHdzMCyQY7omW-rRzAwNPWDytHjm-OElMhJnrFta_ZJuq1BthoCICwQAvD_BwE&gclsrc=aw.ds'"></button>
        </div>
    </div>
    <div class="item3">
        <div class="main">
            <div class="post">
                <h1><%= title %></h1>
                <div class="postcontent" id="postCont">

                </div>
                <form id="myForm" class="centered">
                    <input type="text" id="postmsg" class="textBoxSize">
                    <input id="postbutton" type="submit" class="button button2" value="reply" onclick="postMessage(document.getElementById('postmsg').value, 'postCont')">
                    <script>
                        var test = '<%=username%>';
                    </script>
                </form>

            </div>
                <p>Comments</p>
                <div class="comment">

                <p><div id="cont" class="content">
                    </div>
                </p>
                <form id="myForm" class="centered">
                    <input type="text" id="msg" class="textBoxSize">
                    <input type="submit" class="button button2" value="reply" onclick="postMessage(document.getElementById('msg').value, 'cont')">
                    <script>
                        var test = '<%=username%>';
                    </script>
                </form>
            </div>
        </div>

    </div>
    <div class="item4">
        <div class="favorites">
            <p>Title 1</p>
            <button class="blockRight">Block Button</button>
        </div>
        <div class="favorites">
            <p>Title 2</p>
            <button class="blockRight">Block Button</button>
        </div>
        <div class="favorites">
            <p>Title 3</p>
            <button class="blockRight">Block Button</button>
        </div>
        <div class="favorites">
            <p>Title 4</p>
            <button class="blockRight">Block Button</button>
        </div>
    </div>
</div>



